{{define "content"}}
<div class="card" style="max-width: 640px; margin: 4rem auto;">
    <div style="text-align: center; margin-bottom: 2rem;">
        <div style="font-size: 3.5rem; margin-bottom: 1rem;">✅</div>
        <h2 style="margin: 0; font-size: 1.75rem; letter-spacing: -0.02em; color: var(--success);">MFA Enabled
            Successfully</h2>
        <p style="color: var(--text-muted); margin-top: 0.5rem;">Your account is now protected with multi-factor
            authentication.</p>
    </div>

    <div
        style="background: rgba(251, 191, 36, 0.05); border: 1px solid rgba(251, 191, 36, 0.2); padding: 2rem; border-radius: 12px; margin-bottom: 2.5rem;">
        <h3 style="margin-top: 0; color: #fbbf24; font-size: 1.1rem; display: flex; align-items: center; gap: 0.5rem;">
            ⚠️ Save Your Backup Codes
        </h3>
        <p style="font-size: 0.9rem; color: #94a3b8; line-height: 1.6; margin-bottom: 1.5rem;">
            If you lose your authenticator device, these codes are the <b>only way</b> to regain access to your account.
            Keep them somewhere safe and secret. Each code is <b>single-use</b>.
        </p>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; margin-bottom: 2rem;">
            {{range .Codes}}
            <div
                style="background: #0b0f1a; padding: 0.75rem; border-radius: 8px; border: 1px solid var(--border); text-align: center; font-family: monospace; font-size: 1.1rem; color: var(--text);">
                {{.}}</div>
            {{end}}
        </div>

        <div style="display: flex; gap: 1rem;">
            <button onclick="window.print()"
                style="background: rgba(255,255,255,0.05); border: 1px solid var(--border); color: var(--text); flex: 1; margin: 0;">Print
                Codes</button>
            <button onclick="downloadCodes()"
                style="background: rgba(255,255,255,0.05); border: 1px solid var(--border); color: var(--text); flex: 1; margin: 0;">Download
                .txt</button>
        </div>
    </div>

    <a href="/" class="button"
        style="display: block; text-align: center; background: var(--primary); color: white; padding: 1rem; border-radius: 8px; text-decoration: none; font-weight: 700; transition: var(--transition);">Continue
        to Dashboard</a>
</div>

<script>
    function downloadCodes() {
        const codes = [{{ range .Codes }} "{{.}}", {{ end }}].join('\n');
    const blob = new Blob(["SSH-CA MFA Backup Codes\nGenerated: " + new Date().toLocaleString() + "\nKeep these secret and safe!\n\n" + codes], { type: 'text/plain' });
    const url = window.URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'ssh-ca-backup-codes.txt';
    a.click();
}
</script>
{{end}}